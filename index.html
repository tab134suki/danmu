<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¼¹å¹•äº’åŠ¨ç³»ç»Ÿ - jiyu134</title>
    
    <!-- æ ¸å¿ƒæ ·å¼ -->
    <link rel="stylesheet" href="./css/main.css">
    
    <!-- Supabase å®¢æˆ·ç«¯ -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- å­—ä½“ä¼˜åŒ– -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500&display=swap" rel="stylesheet">
</head>
<body>
    <!-- æ§åˆ¶æ å®¹å™¨ -->
    <header class="control-bar">
        <div class="branding">
            <img src="./assets/logo.svg" alt="ç³»ç»Ÿlogo" class="logo">
            <h1 class="title">å¼¹å¹•äº’åŠ¨ç³»ç»Ÿ</h1>
        </div>
        
        <!-- åŠŸèƒ½æŒ‰é’®ç»„ -->
        <div class="controls">
            <button id="theme-toggle" class="icon-btn" aria-label="åˆ‡æ¢ä¸»é¢˜">
                <span class="theme-icon">ğŸŒ“</span>
            </button>
            <button id="settings-btn" class="icon-btn" aria-label="ç³»ç»Ÿè®¾ç½®">
                âš™ï¸
            </button>
            <div class="auth-status" id="auth-status">
                <span class="user-info">è®¿å®¢æ¨¡å¼</span>
                <button id="login-btn" class="text-btn">ç®¡ç†å‘˜ç™»å½•</button>
            </div>
        </div>
    </header>

    <!-- å¼¹å¹•ä¸»å®¹å™¨ -->
    <main id="danmu-container">
        <div class="system-notice">
            ğŸ‰ æ¬¢è¿ä½¿ç”¨ï¼è¾“å…¥æ–‡å­—åæŒ‰ Enter å‘é€å¼¹å¹•
        </div>
    </main>

    <!-- è®¾ç½®é¢æ¿ (åç»­ä»£ç å—å¡«å……) -->
    <section id="settings-panel" class="panel hidden" aria-hidden="true">
        <!-- è®¾ç½®å†…å®¹å°†åœ¨F1-2éƒ¨åˆ†æä¾› -->
            <!-- è®¾ç½®é¢æ¿å†…å®¹ -->
        <div class="panel-header">
            <h2>ç³»ç»Ÿè®¾ç½®</h2>
            <button class="close-btn" onclick="toggleSettings()" aria-label="å…³é—­è®¾ç½®">
                &times;
            </button>
        </div>
        
        <div class="panel-body">
            <!-- æ˜¾ç¤ºè®¾ç½® -->
            <div class="setting-group">
                <label for="opacity-range">å¼¹å¹•ä¸é€æ˜åº¦</label>
                <div class="slider-container">
                    <input type="range" 
                           id="opacity-range" 
                           min="0" 
                           max="1" 
                           step="0.1"
                           aria-describedby="opacity-value">
                    <span id="opacity-value" class="value-display">80%</span>
                </div>
            </div>
        
            <div class="setting-group">
                <label for="speed-range">æ»šåŠ¨é€Ÿåº¦</label>
                <div class="slider-container">
                    <input type="range" 
                           id="speed-range" 
                           min="0.5" 
                           max="3" 
                           step="0.5"
                           aria-describedby="speed-value">
                    <span id="speed-value" class="value-display">1.0x</span>
                </div>
            </div>
        
            <div class="setting-group">
                <label for="highlight-check">é“¾æ¥é«˜äº®</label>
                <div class="switch-container">
                    <input type="checkbox" 
                           id="highlight-check"
                           aria-checked="true"
                           role="switch">
                    <label for="highlight-check" class="switch-label"></label>
                </div>
            </div>
        
            <!-- ç®¡ç†å‘˜ä¸“å±è®¾ç½® -->
            <div id="admin-controls" class="hidden">
                <div class="divider"></div>
                
                <div class="setting-group">
                    <h3>ç³»ç»Ÿç®¡ç†</h3>
                    <div class="input-group">
                        <input type="text" 
                               id="log-title" 
                               placeholder="æ›´æ–°æ ‡é¢˜"
                               aria-label="æ›´æ–°æ ‡é¢˜">
                        <textarea id="log-content" 
                                  rows="3"
                                  placeholder="æ›´æ–°å†…å®¹..."
                                  aria-label="æ›´æ–°å†…å®¹"></textarea>
                        <button class="primary-btn" 
                                onclick="submitUpdate()"
                                aria-label="å‘å¸ƒæ›´æ–°">
                            å‘å¸ƒç³»ç»Ÿæ›´æ–°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ç³»ç»Ÿä¿¡æ¯æ  -->
    <footer class="status-bar">
        <div class="version-info">
            <span>ç‰ˆæœ¬: v1.0.0</span>
            <span>ä½œè€…: <a href="https://jiyu134.top" target="_blank">jiyu134</a></span>
        </div>
        <div class="runtime-info">
            <span id="uptime-counter">è¿è¡Œæ—¶é•¿: 00:00:00</span>
        </div>
    </footer>

    <!-- æ›´æ–°æ—¥å¿—æ¨¡æ€æ¡† -->
    <div id="update-log-modal" class="modal hidden">
        <div class="modal-content">
                       <!-- æ›´æ–°æ—¥å¿—æ¨¡æ€æ¡†å†…å®¹ -->
            <div class="modal-overlay hidden" id="modal-overlay" onclick="closeModal()"></div>
            <div class="modal-content" role="dialog" aria-labelledby="modal-title" aria-modal="true">
                <div class="modal-header">
                    <h2 id="modal-title" class="modal-title">
                        ğŸ“ ç³»ç»Ÿæ›´æ–°æ—¥å¿—
                        <span class="current-version">å½“å‰ç‰ˆæœ¬: v1.0.0</span>
                    </h2>
                    <button class="close-btn" onclick="closeModal()" aria-label="å…³é—­æ—¥å¿—">
                        &times;
                    </button>
                </div>
                
                <div class="modal-body">
                    <div class="log-filter">
                        <input type="text" 
                               id="log-search" 
                               placeholder="æœç´¢æ›´æ–°å†…å®¹..."
                               aria-label="æœç´¢æ›´æ–°æ—¥å¿—">
                        <select id="version-select" aria-label="æŒ‰ç‰ˆæœ¬ç­›é€‰">
                            <option value="all">å…¨éƒ¨ç‰ˆæœ¬</option>
                        </select>
                    </div>
                    
                    <div class="log-list" id="log-list">
                        <!-- åŠ¨æ€åŠ è½½çš„æ—¥å¿—æ¡ç›® -->
                        <div class="skeleton-loading">
                            <div class="skeleton-item"></div>
                            <div class="skeleton-item"></div>
                            <div class="skeleton-item"></div>
                        </div>
                    </div>
                    
                    <div class="log-pagination">
                        <button class="pagination-btn" 
                                onclick="loadLogPage(-1)" 
                                aria-label="ä¸Šä¸€é¡µ">â†</button>
                        <span class="page-indicator" id="current-page">1/1</span>
                        <button class="pagination-btn" 
                                onclick="loadLogPage(1)" 
                                aria-label="ä¸‹ä¸€é¡µ">â†’</button>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <button class="primary-btn" 
                            onclick="exportLogs()"
                            aria-label="å¯¼å‡ºæ—¥å¿—">
                        ğŸ“¥ å¯¼å‡ºä¸ºPDF
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- åˆå§‹åŒ–è„šæœ¬ -->
    <script type="module">
        // Supabase é…ç½® (éœ€æ›¿æ¢ä¸ºå®é™…å€¼)
        const SUPABASE_URL = 'https://your-project.supabase.co';
        const SUPABASE_KEY = 'your-anon-key';
        
        // åˆå§‹åŒ–å®¢æˆ·ç«¯
        const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);
        
        // æš´éœ²åˆ°å…¨å±€ç”¨äºè°ƒè¯•
        window.supabase = supabase;
    </script>
    <script src="./js/app.js" type="module"></script>
</body>
</html>